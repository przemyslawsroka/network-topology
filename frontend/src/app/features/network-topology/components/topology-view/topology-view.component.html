<div class="topology-container">
  <div class="topology-header">
    <h1 class="page-title">Network Topology</h1>
    <p class="page-subtitle">
      Visualize your GCP network infrastructure and traffic flows based on real-time metrics
    </p>
  </div>

  <div class="topology-content">
    <!-- Latency & Stats Card -->
    <mat-card class="latency-card" *ngIf="latencyInfo">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>speed</mat-icon>
          Data Loading Statistics
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="stats-grid">
          <div class="stat-item">
            <div class="stat-label">Total Load Time</div>
            <div class="stat-value primary">{{latencyInfo.totalLatency}}ms</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Metrics Queried</div>
            <div class="stat-value">{{latencyInfo.metricCount}}</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Connections Found</div>
            <div class="stat-value">{{latencyInfo.connectionCount}}</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Nodes</div>
            <div class="stat-value">{{nodes.length}}</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Edges</div>
            <div class="stat-value">{{links.length}}</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Query Success</div>
            <div class="stat-value success">{{latencyInfo.successCount}}/{{latencyInfo.metricCount}}</div>
          </div>
        </div>
        <div class="actions">
          <button mat-raised-button color="primary" (click)="refreshData()" [disabled]="isLoading">
            <mat-icon>refresh</mat-icon>
            Refresh Data
          </button>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Loading Spinner -->
    <mat-card class="loading-card" *ngIf="isLoading">
      <mat-card-content class="loading-content">
        <mat-spinner diameter="50"></mat-spinner>
        <p>Loading topology data from GCP metrics...</p>
      </mat-card-content>
    </mat-card>

    <!-- Network Graph -->
    <mat-card class="graph-card" *ngIf="!isLoading">
      <mat-card-content>
        <app-network-graph [nodes]="nodes" [links]="links"></app-network-graph>
      </mat-card-content>
    </mat-card>
  </div>
</div>
